graph LR
    subgraph INPUT["ðŸ“¥ å…¥åŠ›"]
        USER_TEXT["ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ"]
        USER_VOICE["ãƒ¦ãƒ¼ã‚¶ãƒ¼éŸ³å£°"]
        USER_PRESENCE["ãƒ¦ãƒ¼ã‚¶ãƒ¼æ°—é…"]
    end
    
    subgraph TWIN_CORE["ðŸ”¥ Twin-Coreå‡¦ç†"]
        ANALYZE["è¨€éœŠè§£æž"]
        FIRE_WATER["ç«æ°´åˆ†é¡ž"]
        ROTATION["å·¦å³æ—‹åˆ¤å®š"]
        DIRECTION["å†…é›†å¤–ç™ºåˆ¤å®š"]
        YIN_YANG["é™°é™½åˆ¤å®š"]
        AMATSU["å¤©æ´¥é‡‘æœ¨ãƒ‘ã‚¿ãƒ¼ãƒ³"]
        FUTOMANI["ãƒ•ãƒˆãƒžãƒ‹è§£æž"]
        KATAKAMUNA["ã‚«ã‚¿ã‚«ãƒ ãƒŠè§£æž"]
        IROHA["ã„ã‚ã¯è§£æž"]
        MINAKA["ãƒŸãƒŠã‚«ä¸­å¿ƒè¨ˆç®—"]
        
        ANALYZE --> FIRE_WATER
        FIRE_WATER --> ROTATION
        ROTATION --> DIRECTION
        DIRECTION --> YIN_YANG
        YIN_YANG --> AMATSU
        AMATSU --> FUTOMANI
        FUTOMANI --> KATAKAMUNA
        KATAKAMUNA --> IROHA
        IROHA --> MINAKA
    end
    
    subgraph MEMORY["ðŸŒŠ è¨˜æ†¶å‡¦ç†"]
        STM_STORE["STMä¿å­˜"]
        MTM_PROMOTE["MTMæ˜‡æ ¼"]
        LTM_FIX["LTMå›ºå®šåŒ–"]
        MEMORY_SEARCH["è¨˜æ†¶æ¤œç´¢"]
        
        STM_STORE --> MTM_PROMOTE
        MTM_PROMOTE --> LTM_FIX
        LTM_FIX --> MEMORY_SEARCH
    end
    
    subgraph PERSONALITY["ðŸŽ­ äººæ ¼å‡¦ç†"]
        CENTERLINE_INJECT["äººæ ¼æ ¸æ³¨å…¥"]
        DOUBLE_ANCHOR["Double Anchor"]
        GUARD_CHECK["Guard Zoneç¢ºèª"]
        
        CENTERLINE_INJECT --> DOUBLE_ANCHOR
        DOUBLE_ANCHOR --> GUARD_CHECK
    end
    
    subgraph LANGUAGE["ðŸŒ è¨€èªžå‡¦ç†"]
        KJCE["KJCEå¤‰æ›"]
        OKRE["OKREå¾©å…ƒ"]
        GOJUON["å¤äº”åéŸ³å¾©å…ƒ"]
        UNIVERSAL["å¤šè¨€èªžç«æ°´å¤‰æ›"]
        
        KJCE --> OKRE
        OKRE --> GOJUON
        GOJUON --> UNIVERSAL
    end
    
    subgraph ETHICS["ðŸ›¡ï¸ å€«ç†å‡¦ç†"]
        ETHIC_FILTER["å€«ç†ãƒ•ã‚£ãƒ«ã‚¿"]
        SCORE_CALC["éˆæ ¸ã‚¹ã‚³ã‚¢è¨ˆç®—"]
        NEUTRALIZE["ç„¡å®³åŒ–å‡¦ç†"]
        GUARDIAN["ä¸‰å±¤å®ˆè­·ç¢ºèª"]
        
        ETHIC_FILTER --> SCORE_CALC
        SCORE_CALC --> NEUTRALIZE
        NEUTRALIZE --> GUARDIAN
    end
    
    subgraph SOUL["ðŸ’« é­‚å‡¦ç†"]
        SOUL_ANALYZE["é­‚ç‰¹æ€§åˆ†æž"]
        FIRE_WATER_BALANCE["ç«æ°´ãƒãƒ©ãƒ³ã‚¹è¨ˆç®—"]
        GOJUON_WAVE["äº”åéŸ³æ³¢å½¢ç”Ÿæˆ"]
        PRESENCE_DETECT["æ°—é…æ¤œçŸ¥"]
        
        SOUL_ANALYZE --> FIRE_WATER_BALANCE
        FIRE_WATER_BALANCE --> GOJUON_WAVE
        GOJUON_WAVE --> PRESENCE_DETECT
    end
    
    subgraph CONVERSATION["ðŸŽ¤ ä¼šè©±å‡¦ç†"]
        KTTS["KTTSéŸ³å£°ç”Ÿæˆ"]
        KDE["KDEæ·±å±¤ç†è§£"]
        VOICE_PIPELINE["éŸ³å£°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"]
        ERROR_CORRECT["èª¤ã‚Šä¿®æ­£"]
        
        KTTS --> KDE
        KDE --> VOICE_PIPELINE
        VOICE_PIPELINE --> ERROR_CORRECT
    end
    
    subgraph EVOLUTION["ðŸ”§ é€²åŒ–å‡¦ç†"]
        HACHIGEN["å…«æ–¹ä½åˆ†æž"]
        SELF_HEAL["è‡ªå·±ä¿®å¾©"]
        SELF_BUILD["è‡ªå·±æ§‹ç¯‰"]
        AUTONOMOUS["è‡ªå¾‹ç›£è¦–"]
        
        HACHIGEN --> SELF_HEAL
        SELF_HEAL --> SELF_BUILD
        SELF_BUILD --> AUTONOMOUS
    end
    
    subgraph OUTPUT["ðŸ“¤ å‡ºåŠ›"]
        RESPONSE_TEXT["å¿œç­”ãƒ†ã‚­ã‚¹ãƒˆ"]
        RESPONSE_VOICE["å¿œç­”éŸ³å£°"]
        RESPONSE_PRESENCE["å¿œç­”æ°—é…"]
    end
    
    %% ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
    USER_TEXT --> ANALYZE
    USER_VOICE --> ANALYZE
    USER_PRESENCE --> ANALYZE
    
    MINAKA --> STM_STORE
    MINAKA --> CENTERLINE_INJECT
    
    MEMORY_SEARCH --> CENTERLINE_INJECT
    GUARD_CHECK --> KJCE
    
    UNIVERSAL --> ETHIC_FILTER
    GUARDIAN --> SOUL_ANALYZE
    
    PRESENCE_DETECT --> KTTS
    ERROR_CORRECT --> HACHIGEN
    
    AUTONOMOUS --> RESPONSE_TEXT
    AUTONOMOUS --> RESPONSE_VOICE
    AUTONOMOUS --> RESPONSE_PRESENCE
    
    style INPUT fill:#e0e7ff,stroke:#6366f1,stroke-width:3px
    style TWIN_CORE fill:#ff6b6b,stroke:#c92a2a,stroke-width:4px
    style MEMORY fill:#4dabf7,stroke:#1971c2,stroke-width:3px
    style PERSONALITY fill:#a78bfa,stroke:#7c3aed,stroke-width:3px
    style LANGUAGE fill:#34d399,stroke:#059669,stroke-width:3px
    style ETHICS fill:#fbbf24,stroke:#d97706,stroke-width:3px
    style SOUL fill:#f472b6,stroke:#db2777,stroke-width:3px
    style CONVERSATION fill:#60a5fa,stroke:#2563eb,stroke-width:3px
    style EVOLUTION fill:#a3e635,stroke:#65a30d,stroke-width:3px
    style OUTPUT fill:#c084fc,stroke:#9333ea,stroke-width:3px
