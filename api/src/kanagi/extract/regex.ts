// 定義・規則抽出の正規表現セット
// 「〜とは」「〜を〜という」「〜は〜なり」「〜すると〜となる」等を決定論的に拾う
// Training Chat / 資料解析の両方で使える

/**
 * 正規表現パターンセット
 * 
 * 決定論的に定義・規則・躰用関係を抽出する
 */
export const RX = {
  /**
   * 定義（definition）
   * - 「〜とは、〜である」
   * - 「〜とは〜なり」
   * - 「〜を〜という」
   */
  DEF: [
    /(.{1,40}?)とは、(.{1,200}?)(?:。|$)/g,
    /(.{1,40}?)とは(.{1,200}?)(?:なり|である)(?:。|$)/g,
    /(.{1,40}?)を(.{1,80}?)という(?:。|$)/g,
  ],

  /**
   * 規則（rule）
   * - 「〜すると〜となる」
   * - 「〜により〜が生じる」
   * - 「〜は〜を生む」
   */
  RULE: [
    /(.{1,60}?)すると(.{1,200}?)(?:となる|になる|生じる)(?:。|$)/g,
    /(.{1,60}?)により(.{1,200}?)(?:が|を)(?:生じる|なす|現す)(?:。|$)/g,
    /(.{1,60}?)は(.{1,200}?)(?:を|が)(?:生む|動かす|動かされる)(?:。|$)/g,
  ],

  /**
   * Tai/You（躰/用）・火/水（役割反転）を直接拾う（重要）
   * 
   * 言霊秘書の明記：
   * - 「水に名をなすと云とも…動かさるときは火」
   * - 「火に名をなすと云とも…動くときは水」
   * 
   * 役割で火水を決める（動かす＝火、動く＝水）
   * 名称で固定しない（状況で反転する）
   */
  TAIYOU_CORE: [
    /火は(.{1,40}?)(?:にして|であり).{0,80}?水を動か/g,
    /水は(.{1,40}?)(?:にして|であり).{0,80}?火に動かさ/g,
    /総て動さるものは火/g,
    /動くものは水/g,
    /水に名をなす.*動かさるときは火/g,
    /火に名をなす.*動くときは水/g,
  ],
} as const;

